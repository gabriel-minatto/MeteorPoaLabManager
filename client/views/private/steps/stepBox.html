<template name="stepBox">
    {{ #with step }}
        <div class="stepArea">
            <div class="card stepCard">
                    {{ #if ../nodeControls }}
                        {{ #with ../nodeControls }}
                            {{ #if this.fatherId }}
                                <i class="fa fa-window-close deleteStepBtn" data-threeid="{{ this.threeId }}" data-stepid="{{ this.fatherId }}" aria-hidden="true"></i>
                            {{ /if }}
                        {{ /with }}
                    {{ else }}
                        <i class="fa fa-window-close deleteStepBtn" aria-hidden="true"></i>
                    {{ /if }}
                    <a href="{{ pathFor ../routeName id=this._id }}">
                    {{ #with getStepCover }}
                        <img class="card-img-top" src="{{ this.url store='stepImagesStore' }}" />
                    {{ /with }}
                    </a>
                <div class="card-header node-title">{{ this.title }}</div>
                {{ #if ../nodeControls }}
                    {{ #with ../nodeControls }}
                        {{ #if this.left }}
                            <i class="fa fa-caret-square-o-left fa-2x stepBtn leftStepBtn" data-stepid="{{ this.fatherId }}" data-push="" aria-hidden="true"></i>
                        {{ /if }}
                        {{ #if this.right }}
                            <i class="fa fa-caret-square-o-right fa-2x stepBtn rightStepBtn" data-stepid="{{ this.fatherId }}" data-push="true" aria-hidden="true"></i>
                        {{ /if }}
                        {{ #if this.down }}
                            <i class="fa fa-caret-square-o-down fa-2x stepBtn downStepBtn" data-stepid="{{ this.threeId }}" aria-hidden="true"></i>
                        {{ /if }}
                    {{ /with }}
                {{ /if }}
            </div>
        </div>
    {{ /with }}
    <style>

        .card-img-top {
            width: 100%;
            height: 5vw;
            width: 7vw;
            object-fit: cover;
        }

        .leftStepBtn {
            position: absolute;
            right: 80%;
            top: 32%;
        }

        .rightStepBtn {
            position: absolute;
            left: 80%;
            top: 32%;
        }

        .downStepBtn {
            position: absolute;
            left: 35%;
            top: 78%;
        }

        .stepBtn {
            background-color: white;
            border-radius: 5px;
            display: none;
        }

        .step-node:hover .rightStepBtn,
        .step-node:hover .leftStepBtn,
        .step-node:hover .downStepBtn {
            display: block;
        }

        .deleteStepBtn {
            right: -10px;
            top: -10px;
            position: absolute;
            float: right;
            padding: 2px 5px;
            background-color: white;
            display: none;
        }

        .stepCard:hover > .deleteStepBtn{
            display: inline-block;
        }

        .step-node {
            max-width: 10%;
        }

        .node-title {
            font-size: 13px;
            padding: 2px;
            opacity: 0.8;
            position: absolute;
            bottom: 60%;
            left: 107%;
            white-space: nowrap;
            z-index: 99;
            color: white;
            background-color: black;
            display: none;
        }

        .step-node:hover .node-title {
            display: block;
        }

        .stepArea {
            max-width: 105%;
            z-index: 999;
        }
    </style>
</template>