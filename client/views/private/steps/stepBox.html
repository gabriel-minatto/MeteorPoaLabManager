<template name="stepBox">
    {{ #with step }}
        <div class="stepArea">
            <div class="card stepCard">
                <i class="fa fa-window-close deleteStepBtn" data-stepid="{{ this._id }}" aria-hidden="true"></i>
                    <a href="{{ pathFor ../routeName id=this._id }}">
                    {{ #with getStepCover }}
                        <img class="card-img-top" src="{{ this.url store='stepImagesStore' }}" />
                    {{ /with }}
                    </a>
                <div class="card-header node-title">{{ this.title }}</div>
                {{ #if ../nodeControls }}
                    {{ #with ../nodeControls }}
                        {{ #if this.left }}
                            <i class="fa fa-arrow-left stepBtn leftStepBtn fa-2x" data-stepid="{{ this.fatherId }}" data-push="" aria-hidden="true"></i>
                        {{ /if }}
                        {{ #if this.right }}
                            <i class="fa fa-arrow-right stepBtn rightStepBtn fa-2x" data-stepid="{{ this.fatherId }}" data-push="true" aria-hidden="true"></i>
                        {{ /if }}
                        {{ #if this.down }}
                            <i class="fa fa-arrow-down stepBtn downStepBtn fa-2x" data-stepid="{{ this._id }}" aria-hidden="true"></i>
                        {{ /if }}
                    {{ /with }}
                {{ /if }}
            </div>
        </div>
    {{ /with }}
    <style>
        .leftStepBtn {
            position: absolute;
            right: 96%;
            top: 32%;
        }

        .rightStepBtn {
            position: absolute;
            left: 96%;
            top: 32%;
        }

        .downStepBtn {
            position: absolute;
            left: 39%;
            top: 94%;
        }

        .stepBtn {
            display: none;
        }

        .step-node:hover .rightStepBtn,
        .step-node:hover .leftStepBtn,
        .step-node:hover .downStepBtn {
            display: block;
        }

        .deleteStepBtn {
            right: -10px;
            top: -10px;
            position: absolute;
            float: right;
            padding: 2px 5px;
            background-color: white;
            display: none;
        }

        .stepCard:hover > .deleteStepBtn{
            display: inline-block;
        }

        .step-node {
            max-width: 10%;
        }

        .node-title {
            font-size: 13px;
            padding: 2px;
            opacity: 0.8;
            position: absolute;
            bottom: 60%;
            left: 107%;
            white-space: nowrap;
            z-index: 99;
            color: white;
            background-color: black;
            display: none;
        }

        .step-node:hover .node-title {
            display: block;
        }

        .stepArea {
            max-width: 105%;
            z-index: 999;
        }
    </style>
</template>