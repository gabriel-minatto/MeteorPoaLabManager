<template name="stepBox">
    <div class="stepArea">
        <div class="card stepCard">
                {{ #if nodeControls }}
                    {{ #with nodeControls }}
                        {{ #if this.fatherId }}
                            {{ #unless ../hideBack }}
                                <i class="fa fa-window-close deleteStepBtn" data-threeid="{{ this.threeId }}" data-stepid="{{ this.fatherId }}" aria-hidden="true"></i>
                            {{ /unless }}
                            <img class="card-img-top editStepAnchor"
                                src="{{ getStepCover.url store='stepImagesStore' }}"
                                data-stepid="{{ getStep._id }}"
                                data-threeid="{{ this.threeId }}" />
                        {{ else }}
                            <img class="card-img-top" src="{{ getStepCover.url store='stepImagesStore' }}" />
                        {{ /if }}
                    {{ /with }}
                {{ else }}
                    {{ #if hideBack }}
                        <img class="card-img-top" src="{{ getStepCover.url store='stepImagesStore' }}" data-stepid="{{ getStep._id }}" />
                    {{ else }}
                        <i class="fa fa-window-close deleteStepBtn" aria-hidden="true" data-stepid="{{ getStep._id }}"></i>
                        <a href="{{ pathFor routeName id=getStep._id }}">
                            <img class="card-img-top" src="{{ getStepCover.url store='stepImagesStore' }}" />
                        </a>
                    {{ /if }}
                {{ /if }}
            <div class="card-header node-title">{{ getStep.title }}</div>
            {{ #if nodeControls }}
                {{ #with nodeControls }}
                    {{ #if this.left }}
                        <i class="fa fa-caret-square-o-left fa-2x stepBtn leftStepBtn" data-stepid="{{ this.fatherId }}" data-push="" aria-hidden="true"></i>
                    {{ /if }}
                    {{ #if this.right }}
                        <i class="fa fa-caret-square-o-right fa-2x stepBtn rightStepBtn" data-stepid="{{ this.fatherId }}" data-push="true" aria-hidden="true"></i>
                    {{ /if }}
                    {{ #if this.down }}
                        <i class="fa fa-caret-square-o-down fa-2x stepBtn downStepBtn mx-auto" data-stepid="{{ this.threeId }}" aria-hidden="true"></i>
                    {{ /if }}
                {{ /with }}
            {{ /if }}
        </div>
    </div>
    <style>

        .card-img-top {
            width: 100%;
            height: 5vw;
            width: 7vw;
            object-fit: cover;
        }

        .deleteStepBtn {
            right: -10px;
            top: -10px;
            position: absolute;
            float: right;
            padding: 2px 5px;
            background-color: white;
            display: none;
        }

        .stepCard:hover > .deleteStepBtn{
            display: inline-block;
        }

    </style>
</template>